(this["webpackJsonpplus-un-radis"]=this["webpackJsonpplus-un-radis"]||[]).push([[7],{94:function(e,n,t){"use strict";t.r(n);var o=t(63),r=t(0),a=t.n(r),i=t(9),c=function(){var e,n=Object(r.useState)(),t=Object(o.a)(n,2),a=t[0],i=t[1];return e=i,Object(r.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){e([n.coords.latitude,n.coords.longitude])})):console.warn("Geolocation is not supported")}),[e]),a},u=function(e,n){var t=function(e,n){var t=window.localStorage.getItem(e);if(!t)return n;try{return JSON.parse(t)}catch(o){return console.warn(o),n}}(e,n),a=Object(r.useState)(t),i=Object(o.a)(a,2),c=i[0],u=i[1];return[c,Object(r.useCallback)((function(n){u(n),function(e,n){window.localStorage.setItem(e,JSON.stringify(n))}(e,n)}),[e,u])]},l=function(e){return fetch(e).then((function(e){if(e.status>=200&&e.status<400)return e.json();throw new Error(e.statusText)}))},s=t(80),f=t(96),d=t(97),v=t(57),p=(t(77),Object(v.a)((function(){return{root:{position:"fixed",top:0,right:0,bottom:0,left:0}}}))),m=function(e){var n=e.children,t=e.onChangePosition,i=e.position,c=p(),u=Object(r.useState)(13),l=Object(o.a)(u,2),v=l[0],m=l[1],b=Object(r.useCallback)((function(e){var n=e.target.getCenter();t([n.lat,n.lng])}),[t]),g=Object(r.useCallback)((function(e){return m(e.target.getZoom())}),[m]),h=Object(s.a)(b,250),j=Object(s.a)(g,250);return a.a.createElement(f.a,{className:c.root,center:i,onMoveEnd:h,onZoomEnd:j,zoom:v},a.a.createElement(d.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n)},b=t(62),g=t.n(b),h=t(89),j=function(e){var n=e.value,t=e.onClick,o=Object(r.useCallback)((function(){return t(n)}),[t,n]);return a.a.createElement(h.a,{icon:e.icon,position:n.position,onClick:o})},O=new g.a.Icon({iconAnchor:[0,0],iconSize:[32,32],iconUrl:"image/040-farmer.svg"}),w=function(e){var n=e.onClick,t=e.value;return a.a.createElement(j,{icon:O,value:t,onClick:n})},E=new g.a.Icon({iconAnchor:[0,0],iconSize:[32,32],iconUrl:"image/033-stall.svg"}),C=function(e){var n=e.onClick,t=e.value;return a.a.createElement(j,{icon:E,onClick:n,value:t})};t.d(n,"useSelectedEntity",(function(){return P}));var k,S=a.a.lazy((function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,90))})),y=a.a.lazy((function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,92))}));!function(e){e[e.Producer=0]="Producer",e[e.Seller=1]="Seller"}(k||(k={}));var P=function(e,n){var t=Object(i.g)("/map/producers/:id"),o=Object(i.g)("/map/sellers/:id");if(t){var r=null===e||void 0===e?void 0:e.find((function(e){return e.id===t.params.id}));if(!r)return;return{value:r,type:k.Producer}}if(o){var a=null===n||void 0===n?void 0:n.find((function(e){return e.id===o.params.id}));if(!a)return;return{value:a,type:k.Seller}}};n.default=function(){var e=u("position"),n=Object(o.a)(e,2),t=n[0],i=n[1],s=c(),f=t||s||[51.505,-.09],d=function(){var e=Object(r.useState)(),n=Object(o.a)(e,2),t=n[0],a=n[1];return Object(r.useEffect)((function(){l("api/producers/list.json").then(a).catch(console.warn)}),[a]),t}(),v=function(){var e=Object(r.useState)(),n=Object(o.a)(e,2),t=n[0],a=n[1];return Object(r.useEffect)((function(){l("api/sellers/list.json").then(a).catch(console.warn)}),[a]),t}(),p=P(d,v),b=function(e){window.location.hash="/map/producers/".concat(e.id)},g=function(e){window.location.hash="/map/sellers/".concat(e.id)},h=function(){window.location.hash="/map"};return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,{position:f,onChangePosition:i},null===v||void 0===v?void 0:v.map((function(e){return a.a.createElement(C,{key:e.id,value:e,onClick:g})})),null===d||void 0===d?void 0:d.map((function(e){return a.a.createElement(w,{key:e.id,value:e,onClick:b})}))),a.a.createElement(a.a.Suspense,{fallback:null},(null===p||void 0===p?void 0:p.type)===k.Seller?a.a.createElement(y,{seller:p.value,onClose:h}):null,(null===p||void 0===p?void 0:p.type)===k.Producer?a.a.createElement(S,{producer:p.value,onClose:h}):null))}}}]);
//# sourceMappingURL=7.bc02fd58.chunk.js.map