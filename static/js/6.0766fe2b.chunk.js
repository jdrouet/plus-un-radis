(this["webpackJsonpplus-un-radis"]=this["webpackJsonpplus-un-radis"]||[]).push([[6],{82:function(e,t,n){"use strict";n.r(t);var o=n(53),r=n(1),a=n.n(r),c=function(){var e,t=Object(r.useState)(),n=Object(o.a)(t,2),a=n[0],c=n[1];return e=c,Object(r.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e([t.coords.latitude,t.coords.longitude])})):console.warn("Geolocation is not supported")}),[e]),a},i=function(e,t){var n=function(e,t){var n=window.localStorage.getItem(e);if(!n)return t;try{return JSON.parse(n)}catch(o){return console.warn(o),t}}(e,t),a=Object(r.useState)(n),c=Object(o.a)(a,2),i=c[0],u=c[1];return[i,Object(r.useCallback)((function(t){u(t),function(e,t){window.localStorage.setItem(e,JSON.stringify(t))}(e,t)}),[e,u])]},u=function(e){return fetch(e).then((function(e){if(e.status>=200&&e.status<400)return e.json();throw new Error(e.statusText)}))},s=n(69),l=n(84),f=n(86),b=n(47),p=(n(65),Object(b.a)((function(){return{root:{position:"fixed",top:0,right:0,bottom:0,left:0}}}))),j=function(e){var t=e.children,n=e.onChangePosition,c=e.position,i=p(),u=Object(r.useState)(13),b=Object(o.a)(u,2),j=b[0],d=b[1],g=Object(r.useCallback)((function(e){var t=e.target.getCenter();n([t.lat,t.lng])}),[n]),m=Object(r.useCallback)((function(e){return d(e.target.getZoom())}),[d]),O=Object(s.a)(g,250),v=Object(s.a)(m,250);return a.a.createElement(l.a,{className:i.root,center:c,onMoveEnd:O,onZoomEnd:v,zoom:j},a.a.createElement(f.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t)},d=n(52),g=n.n(d),m=n(79),O=new g.a.Icon({iconAnchor:[0,0],iconSize:[32,32],iconUrl:"image/040-farmer.svg"}),v=function(e){return a.a.createElement(m.a,{icon:O,position:e.producer.position})},h=new g.a.Icon({iconAnchor:[0,0],iconSize:[32,32],iconUrl:"image/033-stall.svg"}),E=function(e){var t=e.seller,n=e.onClick,o=Object(r.useCallback)((function(){return n(t)}),[n,t]);return a.a.createElement(m.a,{icon:h,onClick:o,position:t.position})},w=a.a.lazy((function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,85))}));t.default=function(){var e=i("position"),t=Object(o.a)(e,2),n=t[0],s=t[1],l=c(),f=n||l||[51.505,-.09],b=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){u("api/producers/list.json").then(a).catch(console.warn)}),[a]),n}(),p=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){u("api/sellers/list.json").then(a).catch(console.warn)}),[a]),n}(),d=Object(r.useState)(),g=Object(o.a)(d,2),m=g[0],O=g[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(j,{position:f,onChangePosition:s},null===p||void 0===p?void 0:p.map((function(e){return a.a.createElement(E,{key:e.id,seller:e,onClick:O})})),null===b||void 0===b?void 0:b.map((function(e){return a.a.createElement(v,{key:e.id,producer:e})}))),a.a.createElement(a.a.Suspense,{fallback:null},a.a.createElement(w,{seller:m,onClose:function(){return O(void 0)}})))}}}]);
//# sourceMappingURL=6.0766fe2b.chunk.js.map