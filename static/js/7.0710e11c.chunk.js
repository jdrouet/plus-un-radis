(this["webpackJsonpplus-un-radis"]=this["webpackJsonpplus-un-radis"]||[]).push([[7],{85:function(e,t,n){"use strict";n.r(t);var o,r=n(53),a=n(1),c=n.n(a),u=function(){var e,t=Object(a.useState)(),n=Object(r.a)(t,2),o=n[0],c=n[1];return e=c,Object(a.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e([t.coords.latitude,t.coords.longitude])})):console.warn("Geolocation is not supported")}),[e]),o},i=function(e,t){var n=function(e,t){var n=window.localStorage.getItem(e);if(!n)return t;try{return JSON.parse(n)}catch(o){return console.warn(o),t}}(e,t),o=Object(a.useState)(n),c=Object(r.a)(o,2),u=c[0],i=c[1];return[u,Object(a.useCallback)((function(t){i(t),function(e,t){window.localStorage.setItem(e,JSON.stringify(t))}(e,t)}),[e,i])]},l=function(e){return fetch(e).then((function(e){if(e.status>=200&&e.status<400)return e.json();throw new Error(e.statusText)}))},s=n(71),f=n(87),b=n(88),v=n(47),p=(n(67),Object(v.a)((function(){return{root:{position:"fixed",top:0,right:0,bottom:0,left:0}}}))),d=function(e){var t=e.children,n=e.onChangePosition,o=e.position,u=p(),i=Object(a.useState)(13),l=Object(r.a)(i,2),v=l[0],d=l[1],j=Object(a.useCallback)((function(e){var t=e.target.getCenter();n([t.lat,t.lng])}),[n]),m=Object(a.useCallback)((function(e){return d(e.target.getZoom())}),[d]),O=Object(s.a)(j,250),g=Object(s.a)(m,250);return c.a.createElement(f.a,{className:u.root,center:o,onMoveEnd:O,onZoomEnd:g,zoom:v},c.a.createElement(b.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t)},j=n(52),m=n.n(j),O=n(80),g=function(e){var t=e.value,n=e.onClick,o=Object(a.useCallback)((function(){return n(t)}),[n,t]);return c.a.createElement(O.a,{icon:e.icon,position:t.position,onClick:o})},h=new m.a.Icon({iconAnchor:[0,0],iconSize:[32,32],iconUrl:"image/040-farmer.svg"}),C=function(e){var t=e.onClick,n=e.value;return c.a.createElement(g,{icon:h,value:n,onClick:t})},k=new m.a.Icon({iconAnchor:[0,0],iconSize:[32,32],iconUrl:"image/033-stall.svg"}),E=function(e){var t=e.onClick,n=e.value;return c.a.createElement(g,{icon:k,onClick:t,value:n})},S=c.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,81))})),w=c.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,83))}));!function(e){e[e.Producer=0]="Producer",e[e.Seller=1]="Seller"}(o||(o={}));t.default=function(){var e=i("position"),t=Object(r.a)(e,2),n=t[0],s=t[1],f=u(),b=n||f||[51.505,-.09],v=function(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){l("api/producers/list.json").then(o).catch(console.warn)}),[o]),n}(),p=function(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){l("api/sellers/list.json").then(o).catch(console.warn)}),[o]),n}(),j=Object(a.useState)(),m=Object(r.a)(j,2),O=m[0],g=m[1],h=Object(a.useCallback)((function(e){return g({value:e,type:o.Producer})}),[g]),k=Object(a.useCallback)((function(e){return g({value:e,type:o.Seller})}),[g]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(d,{position:b,onChangePosition:s},null===p||void 0===p?void 0:p.map((function(e){return c.a.createElement(E,{key:e.id,value:e,onClick:k})})),null===v||void 0===v?void 0:v.map((function(e){return c.a.createElement(C,{key:e.id,value:e,onClick:h})}))),c.a.createElement(c.a.Suspense,{fallback:null},O&&O.type===o.Seller?c.a.createElement(w,{seller:O.value,onClose:function(){return g(void 0)}}):null,O&&O.type===o.Producer?c.a.createElement(S,{producer:O.value,onClose:function(){return g(void 0)}}):null))}}}]);
//# sourceMappingURL=7.0710e11c.chunk.js.map